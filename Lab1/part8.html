<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Circle Chart</title>
</head>
<body>
<script src='https://d3js.org/d3.v7.min.js'></script>
<script>
    const width = 500;
    const height = 500;
    const data = [10, 15, 20, 25, 30];
    // Note different valid ways of specifying color
    const colors = ['#ffffcc','red','rgb(0,255,0)','#31a354','#006837'];
    const svg = d3.select("body")
                  .append("svg")
                  .attr("width", width)
                  .attr("height", height);

    const g = svg.selectAll("g")
                 .data(data)
                 .enter()
                 .append("g")
                 .attr("transform", function(d, i) {
                    return "translate(0,0)";
                 })
    g.append("circle")
        .attr("cx", function(d, i) {
            return i * 100 + 50;
        })
        .attr("cy", function(d, i) {
            return 100;
        })
        .attr("r", function(d) {
            return d * 1.5;
        })
        .attr("fill", function(d, i) {
            return colors[i];
        })
    //exercise 16
    g.append("rect")
        .attr("x", function(d, i) {
            // x of the centre of the circle is 100 and width of the rect is 30
            // so if we want the rect shares a same centre with the circle
            // 100 + 50 - 30 / 2
            return i * 100 + 35;
        })
        .attr("y", function(d, i) {
            // y of the centre of the circle is 100 and height of the rect is 30
            // we have to put rect at 100 - 30 / 2
            return 85;
        })
        .attr("width", function(d) {
            return 30;
        })
        .attr("height", function(d, i) {
            return 30;
        })
        .attr("fill", function(d, i) {
            return "grey";
        })
    g.append("text")
        .attr("x", function(d, i) {
            return i * 100 + 40;
        })
        .attr("y", 105)
        .attr("stroke", "teal")
        .attr("font-size", "12px")
        .attr("font-family", "sans-serif")
        .attr("dx", ".25em")
        .text(function(d) {
            return d;
        });
</script>
</body>
</html>